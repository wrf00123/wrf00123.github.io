<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时光计算器 - 时间单位加减工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .glass {
                background: rgba(255, 255, 255, 0.25);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.18);
            }
            .glass-dark {
                background: rgba(30, 41, 59, 0.75);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.08);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
        }
    </style>
</head>
<body class="font-inter bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen text-dark transition-custom">
    <!-- 背景装饰元素 -->
    <div class="fixed inset-0 overflow-hidden -z-10">
        <div class="absolute -top-40 -right-40 w-96 h-96 bg-primary/20 rounded-full blur-3xl"></div>
        <div class="absolute top-1/3 -left-20 w-72 h-72 bg-secondary/20 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-accent/20 rounded-full blur-3xl"></div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 标题区域 -->
        <header class="text-center mb-12 mt-6">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-primary mb-4 text-shadow">
                <i class="fa fa-clock-o mr-3" aria-hidden="true"></i>时光计算器
            </h1>
            <p class="text-gray-600 text-lg max-w-2xl mx-auto">
                轻松进行时间单位的加减运算，支持天、小时、分钟、秒、星期、月、季度和年
            </p>
        </header>

        <!-- 主要计算器区域 -->
        <main class="glass rounded-2xl shadow-xl p-6 md:p-8 mb-10 transform hover:shadow-2xl transition-custom">
            <!-- 基础时间输入 -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fa fa-calendar-check-o text-primary mr-2" aria-hidden="true"></i>基础时间
                </h2>
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="base-date" class="block text-sm font-medium text-gray-700 mb-1">日期</label>
                        <input type="date" id="base-date" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                    </div>
                    <div class="flex-1">
                        <label for="base-time" class="block text-sm font-medium text-gray-700 mb-1">时间</label>
                        <input type="time" id="base-time" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                    </div>
                    <div class="flex items-end">
                        <button id="use-current" class="w-full md:w-auto px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-custom flex items-center justify-center">
                            <i class="fa fa-refresh mr-2" aria-hidden="true"></i>使用当前时间
                        </button>
                    </div>
                </div>
            </div>

            <!-- 运算设置 -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fa fa-calculator text-primary mr-2" aria-hidden="true"></i>运算设置
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">运算类型</label>
                        <div class="flex bg-gray-100 rounded-lg p-1">
                            <button id="operation-add" class="flex-1 py-2 px-4 rounded-md bg-primary text-white transition-custom">
                                <i class="fa fa-plus mr-1" aria-hidden="true"></i>加
                            </button>
                            <button id="operation-subtract" class="flex-1 py-2 px-4 rounded-md text-gray-700 hover:bg-gray-200 transition-custom">
                                <i class="fa fa-minus mr-1" aria-hidden="true"></i>减
                            </button>
                        </div>
                    </div>
                    <div>
                        <label for="time-amount" class="block text-sm font-medium text-gray-700 mb-1">数量</label>
                        <input type="number" id="time-amount" min="1" value="1" 
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                    </div>
                    <div>
                        <label for="time-unit" class="block text-sm font-medium text-gray-700 mb-1">时间单位</label>
                        <select id="time-unit" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary transition-custom">
                            <option value="second">秒</option>
                            <option value="minute">分钟</option>
                            <option value="hour">小时</option>
                            <option value="day" selected>天</option>
                            <option value="week">星期</option>
                            <option value="month">月</option>
                            <option value="quarter">季度</option>
                            <option value="year">年</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 计算按钮 -->
            <div class="text-center mb-8">
                <button id="calculate" class="px-8 py-4 bg-secondary text-white rounded-lg text-lg font-medium hover:bg-secondary/90 transform hover:scale-105 transition-custom shadow-lg hover:shadow-xl flex items-center justify-center mx-auto">
                    <i class="fa fa-calculator mr-2" aria-hidden="true"></i>计算结果
                </button>
            </div>

            <!-- 结果显示 -->
            <div id="result-section" class="glass-dark rounded-xl p-6 text-light opacity-0 transform translate-y-4 transition-custom">
                <h2 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fa fa-flag-checkered text-accent mr-2" aria-hidden="true"></i>计算结果
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <p class="text-gray-300 mb-1">原始时间</p>
                        <p id="original-time" class="text-lg font-medium"></p>
                    </div>
                    <div>
                        <p class="text-gray-300 mb-1">计算后时间</p>
                        <p id="result-time" class="text-lg font-medium text-accent"></p>
                    </div>
                    <div class="md:col-span-2">
                        <p class="text-gray-300 mb-1">计算详情</p>
                        <p id="calculation-details" class="text-base"></p>
                    </div>
                </div>
            </div>
        </main>

        <!-- 时间单位转换参考 -->
        <section class="mb-16">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa fa-exchange text-primary mr-2" aria-hidden="true"></i>时间单位转换参考
            </h2>
            <div class="glass rounded-xl p-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1分钟</p>
                        <p class="text-gray-600">= 60秒</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1小时</p>
                        <p class="text-gray-600">= 60分钟</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1天</p>
                        <p class="text-gray-600">= 24小时</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1星期</p>
                        <p class="text-gray-600">= 7天</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1月</p>
                        <p class="text-gray-600">≈ 30天</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1季度</p>
                        <p class="text-gray-600">= 3个月</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1年</p>
                        <p class="text-gray-600">= 12个月</p>
                    </div>
                    <div class="bg-white/50 rounded-lg p-4 hover:shadow-md transition-custom">
                        <p class="font-medium">1年</p>
                        <p class="text-gray-600">≈ 365天</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 页脚 -->
        <footer class="text-center text-gray-500 text-sm pb-6">
            <p>© 2023 时光计算器 | 一个简单实用的时间计算工具</p>
        </footer>
    </div>

    <script>
        // DOM元素
        const baseDateInput = document.getElementById('base-date');
        const baseTimeInput = document.getElementById('base-time');
        const useCurrentBtn = document.getElementById('use-current');
        const operationAddBtn = document.getElementById('operation-add');
        const operationSubtractBtn = document.getElementById('operation-subtract');
        const timeAmountInput = document.getElementById('time-amount');
        const timeUnitSelect = document.getElementById('time-unit');
        const calculateBtn = document.getElementById('calculate');
        const resultSection = document.getElementById('result-section');
        const originalTimeEl = document.getElementById('original-time');
        const resultTimeEl = document.getElementById('result-time');
        const calculationDetailsEl = document.getElementById('calculation-details');

        // 状态变量
        let currentOperation = 'add';

        // 初始化 - 设置当前日期和时间
        function init() {
            const now = new Date();
            
            // 格式化日期为YYYY-MM-DD
            const dateStr = now.toISOString().split('T')[0];
            baseDateInput.value = dateStr;
            
            // 格式化时间为HH:MM
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            baseTimeInput.value = `${hours}:${minutes}`;
        }

        // 设置运算类型
        operationAddBtn.addEventListener('click', () => {
            currentOperation = 'add';
            operationAddBtn.classList.add('bg-primary', 'text-white');
            operationAddBtn.classList.remove('text-gray-700', 'hover:bg-gray-200');
            operationSubtractBtn.classList.remove('bg-primary', 'text-white');
            operationSubtractBtn.classList.add('text-gray-700', 'hover:bg-gray-200');
        });

        operationSubtractBtn.addEventListener('click', () => {
            currentOperation = 'subtract';
            operationSubtractBtn.classList.add('bg-primary', 'text-white');
            operationSubtractBtn.classList.remove('text-gray-700', 'hover:bg-gray-200');
            operationAddBtn.classList.remove('bg-primary', 'text-white');
            operationAddBtn.classList.add('text-gray-700', 'hover:bg-gray-200');
        });

        // 使用当前时间
        useCurrentBtn.addEventListener('click', () => {
            const now = new Date();
            
            // 格式化日期为YYYY-MM-DD
            const dateStr = now.toISOString().split('T')[0];
            baseDateInput.value = dateStr;
            
            // 格式化时间为HH:MM:SS
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            baseTimeInput.value = `${hours}:${minutes}`;
            
            // 添加按钮动画
            useCurrentBtn.classList.add('scale-95');
            setTimeout(() => {
                useCurrentBtn.classList.remove('scale-95');
            }, 200);
        });

        // 计算时间
        calculateBtn.addEventListener('click', calculateTime);

        // 计算时间的函数
        function calculateTime() {
            // 获取基础时间
            const dateStr = baseDateInput.value;
            const timeStr = baseTimeInput.value;
            
            if (!dateStr || !timeStr) {
                alert('请选择基础日期和时间');
                return;
            }
            
            // 解析基础时间
            const [year, month, day] = dateStr.split('-').map(Number);
            const [hours, minutes] = timeStr.split(':').map(Number);
            const baseTime = new Date(year, month - 1, day, hours, minutes, 0);
            
            // 获取运算参数
            const amount = parseInt(timeAmountInput.value);
            const unit = timeUnitSelect.value;
            const operation = currentOperation;
            
            // 复制基础时间进行计算
            const resultTime = new Date(baseTime);
            
            // 根据单位进行计算
            switch (unit) {
                case 'second':
                    operation === 'add' 
                        ? resultTime.setSeconds(resultTime.getSeconds() + amount)
                        : resultTime.setSeconds(resultTime.getSeconds() - amount);
                    break;
                case 'minute':
                    operation === 'add' 
                        ? resultTime.setMinutes(resultTime.getMinutes() + amount)
                        : resultTime.setMinutes(resultTime.getMinutes() - amount);
                    break;
                case 'hour':
                    operation === 'add' 
                        ? resultTime.setHours(resultTime.getHours() + amount)
                        : resultTime.setHours(resultTime.getHours() - amount);
                    break;
                case 'day':
                    operation === 'add' 
                        ? resultTime.setDate(resultTime.getDate() + amount)
                        : resultTime.setDate(resultTime.getDate() - amount);
                    break;
                case 'week':
                    operation === 'add' 
                        ? resultTime.setDate(resultTime.getDate() + amount * 7)
                        : resultTime.setDate(resultTime.getDate() - amount * 7);
                    break;
                case 'month':
                    operation === 'add' 
                        ? resultTime.setMonth(resultTime.getMonth() + amount)
                        : resultTime.setMonth(resultTime.getMonth() - amount);
                    break;
                case 'quarter':
                    operation === 'add' 
                        ? resultTime.setMonth(resultTime.getMonth() + amount * 3)
                        : resultTime.setMonth(resultTime.getMonth() - amount * 3);
                    break;
                case 'year':
                    operation === 'add' 
                        ? resultTime.setFullYear(resultTime.getFullYear() + amount)
                        : resultTime.setFullYear(resultTime.getFullYear() - amount);
                    break;
            }
            
            // 显示结果
            displayResult(baseTime, resultTime, amount, unit, operation);
        }

        // 显示计算结果
        function displayResult(originalTime, resultTime, amount, unit, operation) {
            // 格式化时间显示
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                weekday: 'long'
            };
            
            originalTimeEl.textContent = originalTime.toLocaleString('zh-CN', options);
            resultTimeEl.textContent = resultTime.toLocaleString('zh-CN', options);
            
            // 单位中文名称
            const unitNames = {
                'second': '秒',
                'minute': '分钟',
                'hour': '小时',
                'day': '天',
                'week': '星期',
                'month': '月',
                'quarter': '季度',
                'year': '年'
            };
            
            // 运算中文名称
            const operationName = operation === 'add' ? '加上' : '减去';
            
            calculationDetailsEl.textContent = 
                `在原始时间上${operationName}了${amount}${unitNames[unit]}`;
            
            // 显示结果区域（带动画）
            resultSection.classList.remove('opacity-0', 'translate-y-4');
            resultSection.classList.add('opacity-100', 'translate-y-0');
            
            // 添加计算按钮动画
            calculateBtn.classList.add('scale-95');
            setTimeout(() => {
                calculateBtn.classList.remove('scale-95');
            }, 200);
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
